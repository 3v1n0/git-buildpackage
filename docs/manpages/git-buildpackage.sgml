<refentry id="gbp.man.git.buildpackage">
  <refentryinfo>
    <address>
      &dhemail;
    </address>
    <author>
      &dhfirstname;
      &dhsurname;
    </author>
  </refentryinfo>
  <refmeta>
    <refentrytitle>git-buildpackage</refentrytitle>
    &dhsection;
  </refmeta>
  <refnamediv>
    <refname>&git-buildpackage;</refname>
    <refpurpose>Build Debian packages from a Git repository</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <cmdsynopsis>
      &git-buildpackage;
      <arg><option>--git-ignore-new</option></arg>
      <arg><option>--git-tag</option></arg>
      <arg><option>--git-verbose</option></arg>
      <arg><option>--git-upstream-branch=</option><replaceable>treeish</replaceable></arg>
      <arg><option>--git-debian-branch=</option><replaceable>branch_name</replaceable></arg>
      <arg><option>--git-builder=</option><replaceable>BUILD_CMD</replaceable></arg>
      <arg><option>--git-cleaner=</option><replaceable>CLEAN_CMD</replaceable></arg>
      <arg><option>--git-sign-tags</option></arg>
      <arg><option>--git-keyid=</option><replaceable>gpg-keyid</replaceable></arg>
      <arg><option>--git-posttag=</option><replaceable>command</replaceable></arg>
      <arg><option>--git-debian-tag=</option><replaceable>tag-format</replaceable></arg>
      <arg><option>--git-no-create-orig</option></arg>
      <arg><option>--git-tarball-dir=</option><replaceable>directory</replaceable></arg>
      <arg><option>--git-export-dir=</option><replaceable>directory</replaceable></arg>
      <arg><option>--git-export=</option><replaceable>treeish</replaceable></arg>
      <arg><option>--git-pristine-tar</option></arg>
    </cmdsynopsis>
  </refsynopsisdiv>
  <refsect1>
    <title>DESCRIPTION</title>
    <para>
    &git-buildpackage; is used to build Debian source and .deb packages from a &git; repository.
    </para>
    <para>
        &git-buildpackage; will, in order:
   </para>
    <itemizedlist>
        <listitem><para>Verify that it is being executed from the
            proper location.</para>
        </listitem>
	<listitem><para>Verify that the repository doesn't contain any
	uncommitted source changes.</para>
	</listitem>
        <listitem><para>Verify that it is being executed from the
        correct branch.</para>
        </listitem>
	<listitem><para>
	(Optionally) export the source tree to a separate build area
	</para></listitem>
        <listitem><para>Build an orig.tar.gz if it doesn't exist.</para>
        </listitem>
        <listitem><para>Call <application>debuild</application>(1)
            (or the application specified via <option>--git-builder</option>)
            with arguments instructing it to ignore &git; meta-data in
            the diff.gz, passing along all arguments given to
            &git-buildpackage; that don't start with --git-.
          </para>
        </listitem>
	<listitem><para>
	(Optionally) tag the tree after a successful build
	</para></listitem>
	<listitem><para>
	(Optionally) call a post-tag hook - e.g. to push the results to a remote
	repository after creating the tag
	</para></listitem>
    </itemizedlist>
  </refsect1>
  <refsect1>
    <title>OPTIONS</title>

    <variablelist>
      <varlistentry>
        <term><option>--git-ignore-new</option>
        </term>
        <listitem>
	  <para>Build the .diff.gz and debian package although there are
	  uncommitted changes in the source tree.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-tag</option>
        </term>
        <listitem>
          <para>Add a git tag after a successfull build.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-builder=<replaceable>BUILD_CMD</replaceable></option></term>
        <listitem>
          <para>Use <replaceable>BUILD_CMD</replaceable> instead of <command>debuild -i\.git -I.git</command></para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-cleaner=<replaceable>CLEAN_CMD</replaceable></option></term>
        <listitem>
          <para>Use <replaceable>CLEAN_CMD</replaceable> instead of <command>debuild clean</command></para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-verbose</option>
        </term>
        <listitem>
          <para>verbose execution</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-upstream-branch</option>=<replaceable>branch_name</replaceable>
        </term>
        <listitem>
	  <para>Branch to build the orig.tar.gz from if no tag matching the
	  upstream version is found. Default is
	  <replaceable>upstream</replaceable>. You can give any treeish object
	  here.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-debian-branch</option>=<replaceable>branch_name</replaceable>
        </term>
        <listitem>
	  <para>If you're not on this branch when invoking &git-buildpackage;
	  it will fail. Default is <replaceable>master</replaceable>. This is
	  done to make sure you don't accidentally release from a topic branch.
	  Not being on this branch will be ignored when using
	  <option>--git-ignore-new</option>.
	  </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-sign-tags</option>
        </term>
        <listitem>
	  <para>GPG sign all created tags</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-keyid=</option><replaceable>gpg-keyid</replaceable>
        </term>
        <listitem>
	  <para>use this keyid for gpg signing tags</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-posttag=</option><replaceable>command</replaceable>
        </term>
        <listitem>
	  <para>excecute <replaceable>command</replaceable> after tagging a new version</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-debian-tag=</option><replaceable>tag-format</replaceable>
        </term>
        <listitem>
          <para>use this tag format when tagging Debian versions,
  	  default is <replaceable>debian/&lt;version&gt;</replaceable></para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-no-create-orig</option>
        </term>
        <listitem>
	  <para>Don't try to create any orig.tar.gz</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-export-dir=</option><replaceable>directory</replaceable>
        </term>
        <listitem>
	  <para>Export the current branch head (or the treeish object given via
	  <option>--git-export</option> to <replaceable>directory</replaceable>
	  before building.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-export=</option><replaceable>treeish</replaceable>
        </term>
	<listitem> 
	  <para>Instead of exporting the current branch head, export the
	  treeish object <replaceable>treeish</replaceable>. The special name
	  <replaceable>INDEX</replaceable> exports the current index.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-tarball-dir=</option><replaceable>directory</replaceable>
        </term>
        <listitem>
          <para>Search for original tarballs in <replaceable>directory</replaceable> instead of generating them</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--git-pristine-tar</option>
        </term>
        <listitem>
	  <para>use pristine-tar to create the orig.tar.gz</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1>
      &man.git.config-files;
      <para>All options in the config files are specified without the 'git-' prefix.</para>
  </refsect1>
  <refsect1>
    <title>SEE ALSO</title>
    <para>
      <citerefentry>
        <refentrytitle>git-import-dsc</refentrytitle>
        <manvolnum>1</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>git-import-orig</refentrytitle>
        <manvolnum>1</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>git-dch</refentrytitle>
        <manvolnum>1</manvolnum>
      </citerefentry>,
      &man.seealso.common;
    </para>
  </refsect1>
  <refsect1>
    <title>AUTHOR</title>

    <para>&dhusername; &dhemail;</para>

  </refsect1>
</refentry>
